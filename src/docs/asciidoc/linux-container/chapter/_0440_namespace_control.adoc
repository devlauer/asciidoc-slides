ifndef::imagesdir[:imagesdir: ../images]
== Namespace - Nutzung

[%step]
* System Calls
[%step]
** clone()
** unshare()
** setns()

* Tools
** unshare, nsenter, ip (nur net namespace)

* Pseudo Dateisystem /proc/<pid>/ns/<ns-kind>

[.notes]
--
* clone - erstellt neue Namespaces und führt darin den Kind-Prozess aus
* unshare - erstellt einen neuen Namespace und schiebt den aktuellen Prozess dahin
* setns - erlaubt einem in einen existierenden Namespace hineinzuwechseln
** ssh (inject authorized_keys), Prozesserstellung direkt im Container
** Verwaltung existierender Container
** erst ab Kernel 3.8 gut nutzbar
* ein Child-Prozess erbt den Namespace eines Parent-Prozesses
* man muss nicht alle Namespaces ändern, einzelne reichen aus
* wenn der letzte Prozess einen Namespace verlässt wird dieser zerstört
* Pseudo-Dateisystem symlinks auf inode des Namespaces
--

=== Namespaces - Verwendung

[cols="a,a,a,a"]
|===
// Processes
| Prozess A
| Prozess B
| Prozess C
| Prozess D

// Pid Namespaces
|pid:[1]
2+| pid:[2]
|pid:[3]

// Net Namespace
2+|net:[1]
|net:[2]
|net:[3]

// Mount Namespace
3+|mount:[1]
|mount:[2]

|===

[.notes]
--
* hohe Flexibilität
* viele Szenarien möglich
--

